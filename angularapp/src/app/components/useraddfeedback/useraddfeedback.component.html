<div class="container">
  <h2>Add Feedback</h2>
  <form (ngSubmit)="submitFeedback(feedbackForm)" #feedbackForm="ngForm">
    <div class="form-group">
      
      <label for="product">Select Product:</label>
        <select id="product" [(ngModel)]="selectedProduct" name="product">
          <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
        </select>


      <label for="feedback">Feedback *</label> <br>
      <textarea
        id="feedback"
        name="message"
        [(ngModel)]="feedbackText"
        required
        minlength="5"
        class="form-control"
        #feedbackTextRef="ngModel"
      ></textarea> <br>
    </div>

    <div *ngIf="feedbackTextRef.invalid && feedbackTextRef.touched" class="error-messages">
      <p *ngIf="feedbackTextRef.errors?.required">Feedback is required.</p>
      <p *ngIf="feedbackTextRef.errors?.minlength">Feedback must be at least 5 characters long.</p>
    </div>

    <div class="form-group">
      <label for="ratings">Rating *</label> <br>
      <div class="star-rating">
        <ng-container *ngFor="let star of [5, 4, 3, 2, 1]">
          <input
            type="radio"
            id="star{{star}}"
            name="rating"
            [(ngModel)]="rating"
            [value]="star"
            required
          />
          <label for="star{{star}}" title="{{star}} stars">
            <i class="fa" [ngClass]="{'fa-star': rating >= star, 'fa-star-o': rating < star}"></i>
          </label>
        </ng-container>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="feedbackForm.invalid">Submit</button>
  </form>

  <div *ngIf="popupMessage" class="popup">
    <p>{{popupMessage}}</p>
    <button (click)="closePopup()">Ok</button>
  </div>
</div>


